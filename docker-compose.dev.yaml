version: '3.7'

services:
  discovery-service:
    volumes:
      - /mnt/disks/dev-contentually/discovery/service/log:/var/log/discovery:rw

  image-db:
    volumes:
      - /mnt/disks/dev-contentually/image/db/data:/data/db:rw
      - /mnt/disks/dev-contentually/image/db/log:/var/log/mongodb:rw
  image-service:
    volumes:
      - /mnt/disks/dev-contentually/image/service/log:/var/log/image:rw
    environment:
      - SPRING_PROFILES_ACTIVE=dev

  avatar-db:
    volumes:
      - /mnt/disks/dev-contentually/avatar/db/data:/data/db:rw
      - /mnt/disks/dev-contentually/avatar/db/log:/var/log/mongodb:rw
  avatar-service:
    volumes:
      - /mnt/disks/dev-contentually/avatar/service/log:/var/log/avatar:rw
    environment:
      - SPRING_PROFILES_ACTIVE=dev

  category-db:
    volumes:
      - /mnt/disks/dev-contentually/category/db/data:/data/db:rw
      - /mnt/disks/dev-contentually/category/db/log:/var/log/mongodb:rw
  category-service:
    volumes:
      - /mnt/disks/dev-contentually/category/service/log:/var/log/category:rw
    environment:
      - SPRING_PROFILES_ACTIVE=dev

  content-db:
    volumes:
      - /mnt/disks/dev-contentually/content/db/data:/data/db:rw
      - /mnt/disks/dev-contentually/content/db/log:/var/log/mongodb:rw
  content-service:
    volumes:
      - /mnt/disks/dev-contentually/content/service/log:/var/log/content:rw
    environment:
      - SPRING_PROFILES_ACTIVE=dev

  graphql-service:
    volumes:
      - /mnt/disks/dev-contentually/graphql/service/log:/var/log/graphql:rw
    environment:
      - SPRING_PROFILES_ACTIVE=dev